<!DOCTYPE html>
<html lang="zh">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
	<title>DPlayer Docs</title>
	<link rel="stylesheet" href="docute.css">
	<style>
	.markdown-body .markdown-heading:focus,.markdown-body a{color:#0366d6}
	.token.string{color:#183691}
	.nav-list .nav-item>a.router-link-active,.nav-list .nav-item>div.router-link-active{color:#0366d6;border-bottom-color:#0366d6}
	.nav-list .nav-item-dropdown .dropdown-list .dropdown-item .router-link-active,.nav-list .nav-item-dropdown .dropdown-list .dropdown-item .router-link:hover,.sidebar-headings .sidebar-heading .sidebar-heading-anchor.active,.sidebar-headings .sidebar-heading .sidebar-heading-anchor:hover{color:#0366d6}
	.link:hover,.search-form .svg-icon.do-search:hover{color:#0366d6}
	body{text-rendering: auto;}
	</style>
</head>
<body>
<div id="app">
  <div class="page">
    <figure class="sidebar">
      <ul class="sidebar-headings">
        <li data-level="2" class="sidebar-heading visible"><a href="../" class="sidebar-heading-anchor">HOME</a></li>
        <li data-level="2" class="sidebar-heading visible"><a href="#%E5%AE%89%E8%A3%85" class="sidebar-heading-anchor">安装</a></li>
        <li data-level="2" class="sidebar-heading visible"><a href="#%E5%85%A5%E9%97%A8" class="sidebar-heading-anchor">入门</a></li>
        <li data-level="2" class="sidebar-heading visible"><a href="#%E5%8F%82%E6%95%B0" class="sidebar-heading-anchor">参数</a></li>
        <li data-level="2" class="sidebar-heading visible"><a href="#api" class="sidebar-heading-anchor">API</a></li>
        <li data-level="2" class="sidebar-heading visible"><a href="#event-binding" class="sidebar-heading-anchor">事件绑定</a></li>
        <li data-level="2" class="sidebar-heading visible"><a href="#quality-switching" class="sidebar-heading-anchor">清晰度切换</a></li>
        <li data-level="2" class="sidebar-heading has-children visible"><a href="#danmaku" class="sidebar-heading-anchor">弹幕</a></li>
        <li data-level="3" class="sidebar-heading visible"><a href="#danmaku-api" class="sidebar-heading-anchor">弹幕接口</a></li>
        <li data-level="3" class="sidebar-heading visible"><a href="#bilibili-danmaku" class="sidebar-heading-anchor">bilibili 弹幕</a></li>
        <li data-level="2" class="sidebar-heading has-children visible"><a href="#mse-%E6%94%AF%E6%8C%81" class="sidebar-heading-anchor">MSE 支持</a></li>
        <li data-level="3" class="sidebar-heading visible"><a href="#hls" class="sidebar-heading-anchor">HLS</a></li>
        <li data-level="3" class="sidebar-heading visible"><a href="#mpeg-dash" class="sidebar-heading-anchor">MPEG DASH</a></li>
        <li data-level="3" class="sidebar-heading visible"><a href="#flv" class="sidebar-heading-anchor">FLV</a></li>
        <li data-level="3" class="sidebar-heading visible"><a href="#webtorrent" class="sidebar-heading-anchor">WebTorrent</a></li>
        <li data-level="2" class="sidebar-heading visible"><a href="#live" class="sidebar-heading-anchor">直播</a></li>
        <li data-level="2" class="sidebar-heading visible"><a href="#cdn" class="sidebar-heading-anchor">CDN</a></li>
        <li data-level="2" class="sidebar-heading visible"><a href="#FAQ" class="sidebar-heading-anchor">常见问题</a></li>
      </ul>
     </figure>
    <section class="main">
      <div class="content-wrap">
	<div class="markdown-body content">
		  <h1 class="markdown-heading">DPlayer</h1>
		  <p>Wow, such a lovely HTML5 danmaku video player</p>
		  <h2 id="安装" class="markdown-heading markdown-toc-heading">安装</h2>
		  <p>使用 npm :</p>
		  <pre><code>npm install dplayer --save</code></pre>
		  <p>使用 Yarn :</p>
		  <pre><code>yarn add dplayer</code></pre>
          <h2 id="入门" class="markdown-heading markdown-toc-heading">入门</h2>
<pre data-lang="html"><code class="lang-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>DPlayer.min.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dplayer<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>DPlayer.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<pre data-lang="js"><code class="lang-js"><span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DPlayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    container<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'dplayer'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    screenshot<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    video<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        url<span class="token punctuation">:</span> <span class="token string">'demo.mp4'</span><span class="token punctuation">,</span>
        pic<span class="token punctuation">:</span> <span class="token string">'demo.jpg'</span><span class="token punctuation">,</span>
        thumbnails<span class="token punctuation">:</span> <span class="token string">'thumbnails.jpg'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    subtitle<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        url<span class="token punctuation">:</span> <span class="token string">'webvtt.vtt'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    danmaku<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        id<span class="token punctuation">:</span> <span class="token string">'demo'</span><span class="token punctuation">,</span>
        api<span class="token punctuation">:</span> <span class="token string">'https://api.prprpr.me/dplayer/'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
          <p>使用模块管理器:</p>
          <pre data-lang="js"><code class="lang-js"><span class="token keyword">import</span> <span class="token string">'DPlayer/dist/DPlayer.min.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> DPlayer <span class="token keyword">from</span> <span class="token string">'DPlayer'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DPlayer</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
          <h2 id="参数" class="markdown-heading markdown-toc-heading">参数</h2>
          <table>
            <thead><tr><th>名称</th><th>默认值</th><th>描述</th></tr></thead>
            <tbody>
              <tr>
                <td>container</td>
                <td>document.querySelector('.dplayer')</td>
                <td>播放器容器元素</td>
              </tr>
              <tr>
                <td>live</td>
                <td>false</td>
                <td>开启直播模式, <a href="#live" target="_blank">详情</a></td>
              </tr>
              <tr>
                <td>autoplay</td>
                <td>false</td>
                <td>视频自动播放</td>
              </tr>
              <tr>
                <td>theme</td>
                <td>'#b7daff'</td>
                <td>主题色</td>
              </tr>
              <tr>
                <td>loop</td>
                <td>false</td>
                <td>视频循环播放</td>
              </tr>
              <tr><td>lang</td><td>navigator.language.toLowerCase()</td><td>可选值: 'en', 'zh-cn', 'zh-tw'</td></tr>
              <tr>
                <td>screenshot</td>
                <td>false</td>
                <td>开启截图，如果开启，视频和视频封面需要开启跨域</td>
              </tr>
              <tr>
                <td>hotkey</td>
                <td>true</td>
                <td>开启热键</td>
              </tr>
              <tr>
                <td>preload</td>
                <td>'auto'</td>
                <td>可选值: 'none', 'metadata', 'auto'</td>
              </tr>
              <tr>
                <td>volume</td>
                <td>0.7</td>
                <td>默认音量，请注意播放器会记忆用户设置，用户手动设置音量后默认音量即失效</td>
              </tr>
              <tr>
                <td>logo</td>
                <td>-</td>
                <td>在左上角展示一个 logo，你可以通过 CSS 调整它的大小和位置</td>
              </tr>
              <tr>
                <td>apiBackend</td>
                <td>-</td>
                <td>自定义获取和发送弹幕行为，<a href="#live" target="_blank">详情</a></td>
              </tr>
              <tr>
                <td>video</td>
                <td>-</td>
                <td>视频信息</td>
              </tr>
              <tr>
                <td>video.quality</td>
                <td>-</td>
                <td><a href="#quality-switching" target="_blank">详情</a></td>
              </tr>
              <tr>
                <td>video.defaultQuality</td>
                <td>-</td>
                <td><a href="#quality-switching" target="_blank">详情</a></td>
              </tr>
              <tr>
                <td>video.url</td>
                <td>-</td>
                <td>视频链接</td>
              </tr>
              <tr>
                <td>video.pic</td>
                <td>-</td>
                <td>视频封面</td>
              </tr>
              <tr>
                <td>video.thumbnails</td>
                <td>-</td>
                <td>视频缩略图，可以使用 <a href="https://github.com/MoePlayer/DPlayer-thumbnails" target="_blank">DPlayer-thumbnails</a> 生成</td>
              </tr>
              <tr>
                <td>video.type</td>
                <td>'auto'</td>
                <td>可选值: 'auto', 'hls', 'flv', 'dash', 'webtorrent' 或其他自定义类型, <a href="#mse-support" target="_blank">详情</a></td>
              </tr>
              <tr>
                <td>video.customType</td>
                <td>-</td>
                <td>自定义类型, <a href="#mse-support" target="_blank">详情</a></td>
              </tr>
              <tr>
                <td>subtitle</td>
                <td>-</td>
                <td>外挂字幕</td>
              </tr>
              <tr>
                <td>subtitle.url</td>
                <td><code>required</code></td>
                <td>字幕链接</td>
              </tr>
              <tr>
                <td>subtitle.type</td>
                <td>'webvtt'</td>
                <td>字幕类型，可选值: 'webvtt', 'ass'，目前只支持 webvtt</td>
              </tr>
              <tr>
                <td>subtitle.fontSize</td>
                <td>'20px'</td>
                <td>字幕字号</td>
              </tr>
              <tr>
                <td>subtitle.bottom</td>
                <td>'40px'</td>
                <td>字幕距离播放器底部的距离，取值形如: '10px' '10%'</td>
              </tr>
              <tr>
                <td>subtitle.color</td>
                <td>'#fff'</td>
                <td>字幕颜色</td>
              </tr>
              <tr>
                <td>danmaku</td>
                <td>-</td>
                <td>显示弹幕</td>
              </tr>
              <tr>
                <td>danmaku.id</td>
                <td><code>required</code></td>
                <td>弹幕池id，必须唯一</td>
              </tr>
              <tr>
                <td>danmaku.api</td>
                <td><code>required</code></td>
                <td><a href="#danmaku-api" target="_blank">详情</a></td>
              </tr>
              <tr>
                <td>danmaku.token</td>
                <td>-</td>
                <td>弹幕后端验证 token</td>
              </tr>
              <tr>
                <td>danmaku.maximum</td>
                <td>-</td>
                <td>弹幕最大数量</td>
              </tr>
              <tr>
                <td>danmaku.addition</td>
                <td>-</td>
                <td>额外外挂弹幕，<a href="#bilibili-danmaku" target="_blank">详情</a></td>
              </tr>
              <tr>
                <td>danmaku.user</td>
                <td>'DIYgod'</td>
                <td>弹幕用户名</td>
              </tr>
              <tr>
                <td>danmaku.bottom</td>
                <td>-</td>
                <td>弹幕距离播放器底部的距离，防止遮挡字幕，取值形如: '10px' '10%'</td>
              </tr>
              <tr>
                <td>danmaku.unlimited</td>
                <td>false</td>
                <td>海量弹幕模式，即使重叠也展示全部弹幕，请注意播放器会记忆用户设置，用户手动设置后即失效</td>
              </tr>
              <tr><td>contextmenu</td><td>[]</td><td>自定义右键菜单</td></tr>
              <tr>
                <td>mutex</td>
                <td>true</td>
                <td>互斥，阻止多个播放器同时播放，当前播放器播放时暂停其他播放器</td>
              </tr>
            </tbody>
          </table>
          <p>例如:</p>
          <pre data-lang="js"><code class="lang-js"><span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DPlayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    container<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'player'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    autoplay<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    theme<span class="token punctuation">:</span> <span class="token string">'#FADFA3'</span><span class="token punctuation">,</span>
    loop<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    lang<span class="token punctuation">:</span> <span class="token string">'zh-cn'</span><span class="token punctuation">,</span>
    screenshot<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    hotkey<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    preload<span class="token punctuation">:</span> <span class="token string">'auto'</span><span class="token punctuation">,</span>
    logo<span class="token punctuation">:</span> <span class="token string">'logo.png'</span><span class="token punctuation">,</span>
    volume<span class="token punctuation">:</span> <span class="token number">0.7</span><span class="token punctuation">,</span>
    mutex<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    video<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        url<span class="token punctuation">:</span> <span class="token string">'dplayer.mp4'</span><span class="token punctuation">,</span>
        pic<span class="token punctuation">:</span> <span class="token string">'dplayer.png'</span><span class="token punctuation">,</span>
        thumbnails<span class="token punctuation">:</span> <span class="token string">'thumbnails.jpg'</span><span class="token punctuation">,</span>
        type<span class="token punctuation">:</span> <span class="token string">'auto'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    subtitle<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        url<span class="token punctuation">:</span> <span class="token string">'dplayer.vtt'</span><span class="token punctuation">,</span>
        type<span class="token punctuation">:</span> <span class="token string">'webvtt'</span><span class="token punctuation">,</span>
        fontSize<span class="token punctuation">:</span> <span class="token string">'25px'</span><span class="token punctuation">,</span>
        bottom<span class="token punctuation">:</span> <span class="token string">'10%'</span><span class="token punctuation">,</span>
        color<span class="token punctuation">:</span> <span class="token string">'#b7daff'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    danmaku<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        id<span class="token punctuation">:</span> <span class="token string">'9E2E3368B56CDBB4'</span><span class="token punctuation">,</span>
        api<span class="token punctuation">:</span> <span class="token string">'https://api.prprpr.me/dplayer/'</span><span class="token punctuation">,</span>
        token<span class="token punctuation">:</span> <span class="token string">'tokendemo'</span><span class="token punctuation">,</span>
        maximum<span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
        addition<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'https://api.prprpr.me/dplayer/bilibili?aid=4157142'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        user<span class="token punctuation">:</span> <span class="token string">'DIYgod'</span><span class="token punctuation">,</span>
        bottom<span class="token punctuation">:</span> <span class="token string">'15%'</span><span class="token punctuation">,</span>
        unlimited<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    contextmenu<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            text<span class="token punctuation">:</span> <span class="token string">'custom1'</span><span class="token punctuation">,</span>
            link<span class="token punctuation">:</span> <span class="token string">'https://github.com/DIYgod/DPlayer'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            text<span class="token punctuation">:</span> <span class="token string">'custom2'</span><span class="token punctuation">,</span>
            click<span class="token punctuation">:</span> <span class="token punctuation">(</span>player<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
          <h2 id="api" class="markdown-heading markdown-toc-heading">API</h2>
          <ul>
<li><p><code>dp.play()</code> : 播放视频</p></li>
<li><p><code>dp.pause()</code> : 暂停视频</p></li>
<li>
	<p><code>dp.seek(time: number)</code> : 跳转到特定时间</p>
 	<pre data-lang="js"><code class="lang-js">dp<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
<li><p><code>dp.toggle()</code> : 切换播放/暂停</p></li>
<li><p><code>dp.on(event: string, handler: function)</code> : 绑定视频和播放器事件,<a href="#event-binding" target="_blank">详情</a></p></li>
<li><p><code>dp.switchVideo(video, danmaku)</code> : 切换到其他视频</p>
              <pre data-lang="js"><code class="lang-js">dp<span class="token punctuation">.</span><span class="token function">switchVideo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token punctuation">:</span> <span class="token string">'second.mp4'</span><span class="token punctuation">,</span>
    pic<span class="token punctuation">:</span> <span class="token string">'second.png'</span><span class="token punctuation">,</span>
    thumbnails<span class="token punctuation">:</span> <span class="token string">'second.jpg'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>
    api<span class="token punctuation">:</span> <span class="token string">'https://api.prprpr.me/dplayer/'</span><span class="token punctuation">,</span>
    maximum<span class="token punctuation">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    user<span class="token punctuation">:</span> <span class="token string">'dorence'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></li>
<li><p><code>dp.destroy()</code>: 销毁播放器</p></li>
<li><p><code>dp.notice(text: string, time: number)</code> : 显示消息</p></li>
<li><p><code>dp.switchQuality(index: number)</code> : 切换清晰度</p></li>
<li><p><code>dp.speed(rate: number)</code> : 设置视频速度(0.0625 - 16)</p></li>
<li>
	<p><code>dp.video</code>: 原生 video</p>
    <ul>
		<li><p><code>dp.video.currentTime</code> : 返回视频当前播放时间</p></li>
		<li><p><code>dp.video.loop</code> : 返回视频是否循环播放</p></li>
        <li><p><code>dp.video.paused</code>: 返回视频是否暂停</p></li>
        <li><p>支持大多数<a href="http://www.w3school.com.cn/tags/tag_video.asp" target="_blank">原生video接口</a></p></li>
	</ul>
</li>
            <li>
              <p><code>dp.danmaku</code></p>
              <ul>
                <li>
                  <p><code>dp.danmaku.send(danmaku, callback: function)</code> : 提交一个新弹幕</p>
                  <pre data-lang="js"><code class="lang-js">dp<span class="token punctuation">.</span>danmaku<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   text<span class="token punctuation">:</span> <span class="token string">'dplayer is amazing'</span><span class="token punctuation">,</span>
   color<span class="token punctuation">:</span> <span class="token string">'#b7daff'</span><span class="token punctuation">,</span>
   type<span class="token punctuation">:</span> <span class="token string">'right'</span>   <span class="token comment" spellcheck="true">// should be `top` `bottom` or `right`</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
                </li>
                <li>
                  <p><code>dp.danmaku.draw(danmaku)</code>: 实时绘制一个新弹幕</p>
                  <pre data-lang="js"><code class="lang-js">dp<span class="token punctuation">.</span>danmaku<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   text<span class="token punctuation">:</span> <span class="token string">'DIYgod is amazing'</span><span class="token punctuation">,</span>
   color<span class="token punctuation">:</span> <span class="token string">'#fff'</span><span class="token punctuation">,</span>
   type<span class="token punctuation">:</span> <span class="token string">'top'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
                </li>
                <li><p><code>dp.danmaku.opacity(percentage: number)</code>: 设置弹幕透明度(0 - 1)</p></li>
                <li><p><code>dp.danmaku.clear()</code> : 清除所有弹幕</p></li>
                <li><p><code>dp.danmaku.hide()</code> : 隐藏弹幕</p></li>
                <li><p><code>dp.danmaku.show()</code> : 显示弹幕</p></li>
              </ul>
            </li>
            <li>
              <p><code>dp.fullScreen</code>: 两个类型：<code>web</code> 和 <code>browser</code>，默认类型是 <code>browser</code></p>
              <ul>
                <li>
                  <p><code>dp.fullScreen.request(type: string)</code>: 进入全屏</p>
                  <pre data-lang="js"><code class="lang-js">dp<span class="token punctuation">.</span>fullScreen<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'web'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
                </li>
                <li>
                  <p><code>dp.fullScreen.cancel(type: string)</code>: 退出全屏</p>
                  <pre data-lang="js"><code class="lang-js">dp<span class="token punctuation">.</span>fullScreen<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token string">'web'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
                </li>
              </ul>
            </li>
          </ul>
          <h2 id="event-binding" class="markdown-heading markdown-toc-heading">事件绑定</h2>
          <p><code>dp.on(event, handler)</code></p>
          <pre data-lang="js"><code class="lang-js">dp<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'ended'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'player ended'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
          <p>视频事件</p>
          <ul>
            <li>abort</li>
            <li>canplay</li>
            <li>canplaythrough</li>
            <li>durationchange</li>
            <li>emptied</li>
            <li>ended</li>
            <li>error</li>
            <li>loadeddata</li>
            <li>loadedmetadata</li>
            <li>loadstart</li>
            <li>mozaudioavailable</li>
            <li>pause</li>
            <li>play</li>
            <li>playing</li>
            <li>progress</li>
            <li>ratechange</li>
            <li>seeked</li>
            <li>seeking</li>
            <li>stalled</li>
            <li>suspend</li>
            <li>timeupdate</li>
            <li>volumechange</li>
            <li>waiting</li>
          </ul>
          <p>播放器事件</p>
          <ul>
            <li>screenshot</li>
            <li>thumbnails_show</li>
            <li>thumbnails_hide</li>
            <li>danmaku_show</li>
            <li>danmaku_hide</li>
            <li>danmaku_clear</li>
            <li>danmaku_loaded</li>
            <li>danmaku_send</li>
            <li>danmaku_opacity</li>
            <li>contextmenu_show</li>
            <li>contextmenu_hide</li>
            <li>notice_show</li>
            <li>notice_hide</li>
            <li>quality_start</li>
            <li>quality_end</li>
            <li>destroy</li>
            <li>resize</li>
            <li>fullscreen</li>
            <li>fullscreen_cancel</li>
            <li>subtitle_show</li>
            <li>subtitle_hide</li>
            <li>subtitle_change</li>
          </ul>
          <h2 id="quality-switching" class="markdown-heading markdown-toc-heading">清晰度切换</h2>
          <p>在 <code>video.quality</code> 里设置不同清晰度的视频链接和类型，<code>video.defaultQuality</code> 设置默认清晰度</p>
          <pre data-lang="js"><code class="lang-js"><span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DPlayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    container<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'dplayer'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    video<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        quality<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">'HD'</span><span class="token punctuation">,</span>
            url<span class="token punctuation">:</span> <span class="token string">'demo.m3u8'</span><span class="token punctuation">,</span>
            type<span class="token punctuation">:</span> <span class="token string">'hls'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">'SD'</span><span class="token punctuation">,</span>
            url<span class="token punctuation">:</span> <span class="token string">'demo.mp4'</span><span class="token punctuation">,</span>
            type<span class="token punctuation">:</span> <span class="token string">'normal'</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        defaultQuality<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        pic<span class="token punctuation">:</span> <span class="token string">'demo.png'</span><span class="token punctuation">,</span>
        thumbnails<span class="token punctuation">:</span> <span class="token string">'thumbnails.jpg'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
          <h2 id="danmaku" class="markdown-heading markdown-toc-heading">弹幕</h2>
          <h3 id="danmaku-api" class="markdown-heading markdown-toc-heading">弹幕接口</h3>
          <p><code>danmaku.api</code></p>
          <p><strong>现成的接口</strong></p>
          <p>链接: <a href="https://api.prprpr.me/dplayer/" target="_blank">https://api.prprpr.me/dplayer/</a></p>
          <p>每日备份: <a href="https://github.com/DIYgod/DPlayer-data" target="_blank">DPlayer-data</a></p>
          <p><strong>自己搭建</strong></p>
          <p><a href="https://github.com/MoePlayer/DPlayer-node" target="_blank">DPlayer-node</a></p>
          <h3 id="bilibili-danmaku" class="markdown-heading markdown-toc-heading">Bilibili 弹幕</h3>
          <p><code>danmaku.addition</code></p>
          <p>API: <a href="https://api.prprpr.me/dplayer/v2/bilibili?aid=[aid]" target="_blank">https://api.prprpr.me/dplayer/v2/bilibili?aid=[aid]</a> or <a href="https://api.prprpr.me/dplayer/v2/bilibili?cid=[cid]" target="_blank">https://api.prprpr.me/dplayer/v2/bilibili?cid=[cid]</a></p>
          <pre data-lang="js"><code class="lang-js"><span class="token keyword">const</span> option <span class="token operator">=</span> <span class="token punctuation">{</span>
    danmaku<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// ...</span>
        addition<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'https://api.prprpr.me/dplayer/v2/bilibili?aid=[aid]'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
          <h2 id="mse-支持" class="markdown-heading markdown-toc-heading"> <span class="anchor" jump-to-id="mse-支持">
            <svg id="i-link" viewBox="0 0 32 32" width="32" height="32" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="6.25%">
              <path d="M18 8 C18 8 24 2 27 5 30 8 29 12 24 16 19 20 16 21 14 17 M14 24 C14 24 8 30 5 27 2 24 3 20 8 16 13 12 16 11 18 15"></path>
            </svg>
            </span> MSE 支持 </h2>
          <h3 id="hls" class="markdown-heading markdown-toc-heading"> <span class="anchor" jump-to-id="hls">
            <svg id="i-link" viewBox="0 0 32 32" width="32" height="32" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="6.25%">
              <path d="M18 8 C18 8 24 2 27 5 30 8 29 12 24 16 19 20 16 21 14 17 M14 24 C14 24 8 30 5 27 2 24 3 20 8 16 13 12 16 11 18 15"></path>
            </svg>
            </span> HLS </h3>
          <p>需要在 <code>DPlayer.min.js</code> 前面加载 <a href="https://github.com/video-dev/hls.js" target="_blank">hls.js</a>。</p>
          <pre data-lang="html"><code class="lang-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>DPlayer.min.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dplayer<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hls.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>DPlayer.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre>
          <pre data-lang="js"><code class="lang-js"><span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DPlayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    container<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'dplayer'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    video<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        url<span class="token punctuation">:</span> <span class="token string">'demo.m3u8'</span><span class="token punctuation">,</span>
        type<span class="token punctuation">:</span> <span class="token string">'hls'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
          <pre data-lang="js"><code class="lang-js"><span class="token comment" spellcheck="true">// 另一种方式，使用 customType</span>
<span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DPlayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    container<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'dplayer'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    video<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        url<span class="token punctuation">:</span> <span class="token string">'demo.m3u8'</span><span class="token punctuation">,</span>
        type<span class="token punctuation">:</span> <span class="token string">'customHls'</span><span class="token punctuation">,</span>
        customType<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">'customHls'</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>video<span class="token punctuation">,</span> player<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> hls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                hls<span class="token punctuation">.</span><span class="token function">loadSource</span><span class="token punctuation">(</span>video<span class="token punctuation">.</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>
                hls<span class="token punctuation">.</span><span class="token function">attachMedia</span><span class="token punctuation">(</span>video<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
          <h3 id="mpeg-dash" class="markdown-heading markdown-toc-heading">MPEG DASH</h3>
          <p>需要在 <code>DPlayer.min.js</code> 前面加载 <a href="https://github.com/Dash-Industry-Forum/dash.js" target="_blank">dash.js</a>。</p>
          <pre data-lang="html"><code class="lang-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>DPlayer.min.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dplayer<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dash.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>DPlayer.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre>
          <pre data-lang="js"><code class="lang-js"><span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DPlayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    container<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'dplayer'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    video<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        url<span class="token punctuation">:</span> <span class="token string">'demo.mpd'</span><span class="token punctuation">,</span>
        type<span class="token punctuation">:</span> <span class="token string">'dash'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
          <pre data-lang="js"><code class="lang-js"><span class="token comment" spellcheck="true">// 另一种方式，使用 customType</span>
<span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DPlayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    container<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'dplayer'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    video<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        url<span class="token punctuation">:</span> <span class="token string">'demo.mpd'</span><span class="token punctuation">,</span>
        type<span class="token punctuation">:</span> <span class="token string">'customDash'</span><span class="token punctuation">,</span>
        customType<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">'customDash'</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>video<span class="token punctuation">,</span> player<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                dashjs<span class="token punctuation">.</span><span class="token function">MediaPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span>video<span class="token punctuation">,</span> video<span class="token punctuation">.</span>src<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
          <h3 id="flv" class="markdown-heading markdown-toc-heading"> <span class="anchor" jump-to-id="flv">
            <svg id="i-link" viewBox="0 0 32 32" width="32" height="32" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="6.25%">
              <path d="M18 8 C18 8 24 2 27 5 30 8 29 12 24 16 19 20 16 21 14 17 M14 24 C14 24 8 30 5 27 2 24 3 20 8 16 13 12 16 11 18 15"></path>
            </svg>
            </span> FLV </h3>
          <p>需要在 <code>DPlayer.min.js</code> 前面加载 <a href="https://github.com/Bilibili/flv.js" target="_blank">flv.js</a>。</p>
          <pre data-lang="html"><code class="lang-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>DPlayer.min.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dplayer<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>flv.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>DPlayer.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre>
          <pre data-lang="js"><code class="lang-js"><span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DPlayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    container<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'dplayer'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    video<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        url<span class="token punctuation">:</span> <span class="token string">'demo.flv'</span><span class="token punctuation">,</span>
        type<span class="token punctuation">:</span> <span class="token string">'flv'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
          <pre data-lang="js"><code class="lang-js"><span class="token comment" spellcheck="true">// 另一种方式，使用 customType</span>
<span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DPlayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    container<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'dplayer'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    video<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        url<span class="token punctuation">:</span> <span class="token string">'demo.flv'</span><span class="token punctuation">,</span>
        type<span class="token punctuation">:</span> <span class="token string">'customFlv'</span><span class="token punctuation">,</span>
        customType<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">'customFlv'</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>video<span class="token punctuation">,</span> player<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> flvPlayer <span class="token operator">=</span> flvjs<span class="token punctuation">.</span><span class="token function">createPlayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    type<span class="token punctuation">:</span> <span class="token string">'flv'</span><span class="token punctuation">,</span>
                    url<span class="token punctuation">:</span> video<span class="token punctuation">.</span>src
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                flvPlayer<span class="token punctuation">.</span><span class="token function">attachMediaElement</span><span class="token punctuation">(</span>video<span class="token punctuation">)</span><span class="token punctuation">;</span>
                flvPlayer<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
          <h3 id="webtorrent" class="markdown-heading markdown-toc-heading"> <span class="anchor" jump-to-id="webtorrent">
            <svg id="i-link" viewBox="0 0 32 32" width="32" height="32" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="6.25%">
              <path d="M18 8 C18 8 24 2 27 5 30 8 29 12 24 16 19 20 16 21 14 17 M14 24 C14 24 8 30 5 27 2 24 3 20 8 16 13 12 16 11 18 15"></path>
            </svg>
            </span> WebTorrent </h3>
          <p>需要在 <code>DPlayer.min.js</code> 前面加载 <a href="https://github.com/webtorrent/webtorrent" target="_blank">webtorrent</a>。</p>
          <pre data-lang="html"><code class="lang-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>DPlayer.min.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dplayer<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>webtorrent.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>DPlayer.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre>
          <pre data-lang="js"><code class="lang-js"><span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DPlayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    container<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'dplayer'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    video<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        url<span class="token punctuation">:</span> <span class="token string">'magnet:demo'</span><span class="token punctuation">,</span>
        type<span class="token punctuation">:</span> <span class="token string">'webtorrent'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
          <pre data-lang="js"><code class="lang-js"><span class="token comment" spellcheck="true">// 另一种方式，使用 customType</span>
<span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DPlayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    container<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'dplayer'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    video<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        url<span class="token punctuation">:</span> <span class="token string">'magnet:demo'</span><span class="token punctuation">,</span>
        type<span class="token punctuation">:</span> <span class="token string">'customWebTorrent'</span><span class="token punctuation">,</span>
        customType<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">'customWebTorrent'</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>video<span class="token punctuation">,</span> player<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                player<span class="token punctuation">.</span>container<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'dplayer-loading'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebTorrent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">const</span> torrentId <span class="token operator">=</span> video<span class="token punctuation">.</span>src<span class="token punctuation">;</span>
                client<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>torrentId<span class="token punctuation">,</span> <span class="token punctuation">(</span>torrent<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">const</span> file <span class="token operator">=</span> torrent<span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.mp4'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    file<span class="token punctuation">.</span><span class="token function">renderTo</span><span class="token punctuation">(</span>video<span class="token punctuation">,</span> <span class="token punctuation">{</span>
                        autoplay<span class="token punctuation">:</span> player<span class="token punctuation">.</span>options<span class="token punctuation">.</span>autoplay
                    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
                        player<span class="token punctuation">.</span>container<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'dplayer-loading'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
          <h2 id="live" class="markdown-heading markdown-toc-heading">直播</h2>
          <p>你可以把 DPlayer 用在直播当中，但如果你想要直播弹幕，你需要自己准备一个 WebSocket 后端。</p>
          <p>初始化播放器:</p>
          <pre data-lang="js"><code class="lang-js"><span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DPlayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    container<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'dplayer'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    live<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    danmaku<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    apiBackend<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        read<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>endpoint<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Pretend to connect WebSocket'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        send<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>endpoint<span class="token punctuation">,</span> danmakuData<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Pretend to send danamku via WebSocket'</span><span class="token punctuation">,</span> danmakuData<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    video<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        url<span class="token punctuation">:</span> <span class="token string">'demo.m3u8'</span><span class="token punctuation">,</span>
        type<span class="token punctuation">:</span> <span class="token string">'hls'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
          <p>通过 WebSocket 获取到弹幕之后，通过 <code>dp.danmaku.draw</code> 绘制弹幕:</p>
          <pre data-lang="js"><code class="lang-js"><span class="token keyword">const</span> danmaku <span class="token operator">=</span> <span class="token punctuation">{</span>
    text<span class="token punctuation">:</span> <span class="token string">'Get a danamku via WebSocket'</span><span class="token punctuation">,</span>
    color<span class="token punctuation">:</span> <span class="token string">'#fff'</span><span class="token punctuation">,</span>
    type<span class="token punctuation">:</span> <span class="token string">'right'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
dp<span class="token punctuation">.</span>danmaku<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span>danmaku<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
		<h2 id="cdn" class="markdown-heading markdown-toc-heading">CDN</h2>
		<ul>
			<li><a href="http://www.bootcdn.cn/dplayer/" target="_blank">bootcdn</a></li>
			<li><a href="https://www.jsdelivr.com/package/npm/dplayer" target="_blank">jsDelivr</a></li>
            <li><a href="https://cdnjs.com/libraries/dplayer" target="_blank">cdnjs</a></li>
            <li><a href="https://unpkg.com/dplayer/" target="_blank">unpkg</a></li>
        </ul>
          <h2 id="FAQ" class="markdown-heading markdown-toc-heading">常见问题</h2>
          <h3 class="markdown-heading markdown-toc-heading">为什么播放器不能全屏？</h3>
          <p>如果播放器被包含在 iframe 里，尝试在 iframe 上添加 <code>allowfullscreen</code> 属性。</p>
          <p>为了完善的浏览器兼容性，它应该是这样：</p>
          <pre data-lang="html"><code class="lang-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>example.com<span class="token punctuation">"</span></span> <span class="token attr-name">allowfullscreen</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>allowfullscreen<span class="token punctuation">"</span></span> <span class="token attr-name">mozallowfullscreen</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mozallowfullscreen<span class="token punctuation">"</span></span>
    <span class="token attr-name">msallowfullscreen</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>msallowfullscreen<span class="token punctuation">"</span></span> <span class="token attr-name">oallowfullscreen</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>oallowfullscreen<span class="token punctuation">"</span></span>
    <span class="token attr-name">webkitallowfullscreen</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>webkitallowfullscreen<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>
</code></pre>
          <h3 class="markdown-heading markdown-toc-heading">为什么播放器不能在手机上自动播放？</h3>
          <p>大多数移动端浏览器禁止了视频自动播放。</p>
        </div>
        <!----></div>
    </section>
  </div>
</div>
</body>
</html>